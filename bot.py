from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    CallbackQueryHandler,
    ContextTypes,
    MessageHandler,
    filters
)
import os
import logging
import logging
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO,
    filename='bot.log',
    filemode='a'
)
logger = logging.getLogger(__name__)

PORT = int(os.environ.get('PORT', 8000))
TOKEN = '8159127478:AAHwjKl3zeZ3LZ4RgJgZ9X4Y1WOOKQFyZww'
ADMIN_CHAT_IDS = ['79100904945', '79032587332']  # ID менеджера и администратора

# ========== ДАННЫЕ О ТОВАРАХ ==========
categories = [
    {"id": "1", "name": "Снегозадержатели"},
    {"id": "2", "name": "Кровельные ограждения"},
    {"id": "3", "name": "Пожарные лестницы"},
    {"id": "4", "name": "Лестницы"},
    {"id": "5", "name": "Переходные мостики"}
]

# Данные из Excel файла
product_specs = {
    # Снегозадержатели
    "1_1": {"specs": ["Кровля из сэндвич панели", "Кровля из профнастила высокой волны"], "height": []},
    "1_2": {"specs": ["Универсальное крепление"], "height": []},
    "1_3": {"specs": ["Фальцевая кровля"], "height": []},
    "1_4": {"specs": ["Универсальное крепление"], "height": []},
    "1_5": {"specs": ["Фальцевая кровля"], "height": []},
    "1_6": {"specs": ["Универсальное крепление"], "height": []},
    "1_7": {"specs": ["Фальцевая кровля"], "height": []},
    "1_8": {"specs": ["Бык", "Волк", "Кошка", "Петух"], "height": []},
    "1_9": {"specs": ["Бык", "Волк", "Кошка", "Петух"], "height": []},
    
    # Кровельные ограждения
    "2_1": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_2": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_3": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_4": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_5": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_6": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_7": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_8": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_9": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_10": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_11": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    "2_12": {"specs": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"], "height": []},
    
    # Пожарные лестницы
    "3_1": {"specs": [], "height": []},
    "3_2": {"specs": [], "height": []},
    
    # Лестницы
    "4_1": {"specs": ["Длина 2000 мм", "Длина 3000 мм"], "height": []},
    "4_2": {"specs": ["Длина 2000 мм", "Длина 3000 мм"], "height": []},
    "4_3": {"specs": ["Длина 2000 мм", "Длина 3000 мм"], "height": []},
    "4_4": {"specs": ["Длина 2000 мм", "Длина 3000 мм"], "height": []},
    
    # Переходные мостики
    "5_1": {"specs": ["Длина 600 мм", "Длина 1250 мм", "Длина 2500 мм"], "height": []},
    "5_2": {"specs": ["Длина 600 мм", "Длина 1250 мм", "Длина 2500 мм"], "height": []},
    "5_3": {"specs": ["Длина 600 мм", "Длина 1250 мм", "Длина 2500 мм"], "height": []},
    "5_4": {"specs": ["Длина 600 мм", "Длина 1250 мм", "Длина 2500 мм"], 
            "height": ["Высота 600 мм", "Высота 800 мм", "Высота 1200 мм"]},
}

products = {
    "1": [  # Снегозадержатели
        {
            "id": "1_1",
            "name": "СТС «ПРОФ»",
            "description": (
                "Снегозадержатель СТС «ПРОФ» длиной 3000 мм предназначен для кровель из "
                "профнастила выше НС40 и сендвич-панели любого производителя.\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Труба плоскоовал Zn 45×25 — 2 шт.\n"
                "2. Кронштейн усиленный СТС с герметичной бутило-каучуковой лентой, "
                "оцинкованный, толщина металла 2 мм — 4 шт.\n"
                "3. Заглушки 45х25 — 4 шт."
            ),
            "specs": ["Кровля из сэндвич панели", "Кровля из профнастила высокой волны"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 3475, "Цинк+краска": 3735},
            "photo": "СТС «ПРОФ».jpg"
        },
        {
            "id": "1_2",
            "name": "СТС «Усиленный универсальный»",
            "description": (
                "Снегозадержатель СТС «Усиленный универсальный» длиной 3000 мм и подходит для всех видов кровельных материалов.\n\n"
                "Имеет улучшенную конструкцию из усиленного кронштейна и плоскоовальной трубы, что позволяет выдерживать большие нагрузки. "
                "Толщина металла трубы не менее 1,5 мм, толщина металла кронштейна не менее 2 мм. Подходит для снеговых районов с повышенной снеговой нагрузкой >200 кг/м².\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Труба оцинкованная плоскоовал 45×25 мм — 2 шт.\n"
                "2. Кронштейн «СТС» оцинкованный, толщина металла 2 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Заглушки пластиковые 45×25 — 4 шт."
            ),
            "specs": ["Универсальное крепление"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 4200, "Цинк+краска": 4500},
            "photo": "СТС «Усиленный универсальный».jpg"
        },
        {
            "id": "1_3",
            "name": "СТС «Усиленный фальц»",
            "description": (
                "Снегозадержатель СТС «Усиленный фальц» длиной 3000 мм предназначен для фальцевых видов кровли.\n\n"
                "Имеет улучшенную конструкцию из усиленного кронштейна и плоскоовальной трубы, что позволяет выдерживать большие нагрузки. "
                "Толщина металла трубы не менее 1,5 мм, толщина металла кронштейна не менее 2 мм. Подходит для снеговых районов с повышенной снеговой нагрузкой >200 кг/м².\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Труба оцинкованная плоскоовал 45×25 мм — 2 шт.\n"
                "2. Кронштейн «СТС» оцинкованный, толщина металла 2 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Заглушки пластиковые 45×25 — 4 шт.\n"
                "4. Прижимные планки — 1 комплект (для фальцевой кровли, крепление 2)"
            ),
            "specs": ["Фальцевая кровля"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 4300, "Цинк+краска": 4600},
            "photo": "СТС «Усиленный фальц».jpg"
        },
        {
            "id": "1_4",
            "name": "СТС «Универсальный»",
            "description": (
                "Снегозадержатель СТС «Универсальный» длиной 3000 мм подходит для всех видов кровельных материалов. Он предотвращает внезапный сход снега с крыши и обеспечивает безопасность зимой.\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Труба оцинкованная круглая Ф25 мм — 2 шт.\n"
                "2. Кронштейн «универсальный» оцинкованный, толщина металла 1,5 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Заглушки пластиковые Ф25 мм — 4 шт."
            ),
            "specs": ["Универсальное крепление"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 3800, "Цинк+краска": 4100},
            "photo": "СТС «Универсальный».jpg"
        },
        {
            "id": "1_5",
            "name": "СТС «Фальц»",
            "description": (
                "Снегозадержатель СТС «Фальц» длиной 3000 мм предназначен для фальцевых видов кровли. Он предотвращает лавинообразный сход снега и обеспечивает безопасность в зимнее время.\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Труба оцинкованная круглая Ф25 мм — 2 шт.\n"
                "2. Кронштейн «универсальный» оцинкованный, толщина металла 1,5 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Заглушки пластиковые Ф25 мм — 4 шт.\n"
                "4. Прижимные планки — 1 комплект (для фальцевой кровли, крепление 2)"
            ),
            "specs": ["Фальцевая кровля"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 3900, "Цинк+краска": 4200},
            "photo": "СТС «Фальц».jpg"
        },
        {
            "id": "1_6",
            "name": "СТС «Решетчатый универсальный»",
            "description": (
                "Снегозадержатель СТС «Решетчатый универсальный» имеет длину 2500 мм и подходит для всех видов кровельных материалов. Он надежно удерживает снег на крыше и предотвращает его лавинообразный сход.\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Панель решетчатая, толщина металла 1.5 мм — 1 шт.\n"
                "2. Кронштейн решетчатого СЗ оцинкованный, толщина металла 2 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Болт М8×30 — 12 шт.\n"
                "   • Гайка М8 — 12 шт.\n"
                "   • Шайба Ф8 мм увеличенная — 12 шт."
            ),
            "specs": ["Универсальное крепление"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 4000, "Цинк+краска": 4300},
            "photo": "СТС «Решетчатый универсальный».jpg"
        },
        {
            "id": "1_7",
            "name": "СТС «Решётчатый фальц»",
            "description": (
                "Снегозадержатель СТС «Решётчатый фальц» имеет длину 2500 мм и предназначен для использования с фальцевой кровлей.\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Панель решетчатая, толщина металла 1.5 мм — 1 шт.\n"
                "2. Кронштейн решетчатого СЗ оцинкованный, толщина металла 2 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Болт М8×30 — 12 шт.\n"
                "   • Гайка М8 — 12 шт.\n"
                "   • Шайба Ф8 мм увеличенная — 12 шт.\n"
                "4. Прижимные планки — 1 комплект (для фальцевой кровли, крепление 2)"
            ),
            "specs": ["Фальцевая кровля"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 4100, "Цинк+краска": 4400},
            "photo": "СТС «Решётчатый фальц».jpg"
        },
        {
            "id": "1_8",
            "name": "СТС «Фигурный универсальный»",
            "description": (
                "Снегозадержатель СТС «Фигурный универсальный» имеет длину 3000 мм и подходит для всех видов кровельных материалов. Вы можете выбрать одну из четырех фигурок: бык, волк, кошка или петух. Он надежно удерживает снег на крыше и предотвращает его лавинообразный сход.\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Труба оцинкованная круглая Ф25 мм — 2 шт.\n"
                "2. Кронштейн СТС «фигурный» (петух, кошка, волк, бык) оцинкованный, толщина металла 2 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Заглушки пластиковые Ф25 мм — 4 шт."
            ),
            "specs": ["Бык", "Волк", "Кошка", "Петух"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 4200, "Цинк+краска": 4500},
            "photo": "СТС «Фигурный универсальный».jpg"
        },
        {
            "id": "1_9",
            "name": "СТС «Фигурный фальц»",
            "description": (
                "Снегозадержатель СТС «Фигурный фальц» подходит для всех видов кровельных материалов, и вы можете выбрать одну из четырех фигурок: бык, волк, кошка или петух.\n\n"
                "Снегозадержатель соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Труба оцинкованная круглая Ф25 мм — 2 шт.\n"
                "2. Кронштейн СТС «фигурный» (петух, кошка, волк, бык) оцинкованный, толщина металла 2 мм — 4 шт.\n"
                "3. Крепеж — 1 комплект:\n"
                "   • Саморез для крепления лаг и реек 8×60 — 8 шт.\n"
                "   • Резиновая прокладка 10×30 — 8 шт.\n"
                "   • Заглушки пластиковые Ф25 мм — 4 шт.\n"
                "4. Прижимные планки — 1 комплект (для фальцевой кровли)"
            ),
            "specs": ["Бык", "Волк", "Кошка", "Петух"],
            "coating": ["Цинк", "Цинк+краска"],
            "price": {"Цинк": 4300, "Цинк+краска": 4600},
            "photo": "СТС «Фигурный фальц».jpg"
        }
    ],
    "2": [
    {
        "id": "2_1",
        "name": "СТС «Для ПВХ кровель»",
        "description": (
            "Данное ограждение разработано специально для ПВХ кровли. Оно имеет специальную манжету для сварки с ПВХ мембраной, что обеспечивает 100% герметичность. Ограждение производится длиной 3 000 мм также есть доборные элементы 1000 мм.\n\n"
            "Высота кровельного ограждения и количество поперечных труб бывает:\n"
            "• H=600 мм (2 поперечные трубы)\n"
            "• H=800 мм (2 или 3 поперечные трубы)\n"
            "• H=1200 мм (2 или 3 поперечные трубы)\n\n"
            "Кровельное ограждение для ПВХ кровель соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм - 2 шт. или 3 шт.\n"
            "2. Кронштейн ограждения «ПРОФ» толщина метала 2 мм с герметичной бутил-каучуковой лентой у основания - 3 шт.\n"
            "3. Стойка ограждения Ф51 оцинкованная, толщина металла 1,5 мм (600, 800,1200) - 3 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2, 3 шт.\n"
            " • Болт М8×60 + гайка М8 - 6 шт.\n"
            " • Саморез 5,5×25 - 12 шт.\n"
            " • Хомут крепления трубы с ограждением - 6, 9 шт.\n"
            "6. Заглушка пластиковая Ф50 - 3 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Нет вариантов"],
                "Цвет": ["Нет вариантов"],
                "price": 7650
            },
            "Высота 800 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Нет вариантов"],
                    "Цвет": ["Нет вариантов"],
                    "price": 7830
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Нет вариантов"],
                    "Цвет": ["Нет вариантов"],
                    "price": 9265
                }
            ],
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Нет вариантов"],
                    "Цвет": ["Нет вариантов"],
                    "price": 9120
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Нет вариантов"],
                    "Цвет": ["Нет вариантов"],
                    "price": 9540
                }
            ]
        },
        "photo": "СТС «Для ПВХ кровель».jpg"
    },
    {
        "id": "2_2",
        "name": "Кровельное ограждение СТС «ПРОФ»",
        "description": (
            "Кровельное ограждение СТС «ПРОФ» предназначен для кровель из профнастила выше НС40 и сендвич-панели любого производителя. Доступно в восьми вариантах с одинаковой длиной 3 м и различной высотой. Варианты для сэндвич-панелей: 0,6 м - две поперечные трубы, 0,8 м и 1,2 м - по две трубы, 1,2 м с тремя трубами. Варианты для профнастила: 0,6, 0,8 и 1,2 м - по две поперечные трубы, 1,2 м - три трубы. Обеспечивают безопасность при нахождении на крыше.\n\n"
            "Кровельное ограждение соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм - 2 шт, 3 шт.\n"
            "2. Кронштейн ограждения «ПРОФ» оцинкованный, толщина метала 2 мм с герметичной бутил-каучуковой лентой у основания - 3 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 3 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 9 шт.\n"
            " • Саморез 5,5×25 - 11 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 3780,
                    "Цинк+краска": 4070
                }
            },
            "Высота 800 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 4160,
                    "Цинк+краска": 4455
                }
            },
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4750,
                        "Цинк+краска": 5045
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5460,
                        "Цинк+краска": 5750
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение СТС «ПРОФ».jpg"
    },
    {
        "id": "2_3",
        "name": "Кровельное ограждение комбинированное СТС «ПРОФ»",
        "description": (
            "Кровельное ограждение комбинированное СТС «ПРОФ» предназначен для кровель из профнастила выше НС40 и сендвич-панели любого производителя. Доступно в восьми вариантах с одинаковой длиной 3 м и различной высотой. Варианты для сэндвич-панелей: 60 см - две поперечные трубы, 80 см и 1.2 м - по две трубы, 1.2 м с тремя трубами. Варианты для профнастила: 60, 80 и 120 см - по две поперечные трубы, 1.2 м - три трубы. Обеспечивают безопасность при нахождении на крыше.\n\n"
            "Кровельное ограждение комбинированное соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм - 2 шт., 3 шт.\n"
            "2. Труба плоскоовал Ф45×25 мм - 2 шт.\n"
            "3. Кронштейн ограждения «ПРОФ» оцинкованный, толщина метала 2 мм с герметичной бутил-каучуковой лентой у основания - 4 шт.\n"
            "4. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм. (600, 800, 1200) - 4 шт.\n"
            "5. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "6. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 9 шт.\n"
            " • Саморез 5,5×25 - 11 шт.\n"
            " • Золушки пластиковые 45х25 мм - 4 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 6105,
                    "Цинк+краска": 6490
                }
            },
            "Высота 800 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 6620,
                    "Цинк+краска": 6980
                }
            },
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7290,
                        "Цинк+краска": 7730
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7990,
                        "Цинк+краска": 8505
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение комбинированное СТС «ПРОФ».jpg"
    },
    {
        "id": "2_4",
        "name": "Кровельное ограждение СТС «Универсальное»",
        "description": (
            "Кровельное ограждение СТС «Универсальное» представлено в шести моделях длиной 3 метра с различной высотой: 60 см - 2 поперечные трубы, 80 см - две или три трубы, 120 см - две, три или четыре трубы. Ограждение подходит для любых видов кровельных покрытий и обеспечивает безопасность на крыше.\n\n"
            "Кровельное ограждение соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм - 2 шт.\n"
            "2. Кронштейн ограждения «СТС» оцинкованный, толщина метала 1,5 мм - 3 шт.\n"
            "3. Стойка ограждения 45×30, толщина металла 2 мм. (600, 800, 1200) - 3 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж сборочный - 1 комплект:\n"
            " • Саморез для крепления лаг и реек 8×60 - 6 шт.\n"
            " • Резиновая прокладка 30×10 - 6 шт.\n"
            " • Стыковочные планки - 2, 3 шт.\n"
            " • Болт М10×20 + гайка М10 - 7 шт.\n"
            " • Саморез 5,5×25 - 10 шт.\n"
            "6. Прижимные планки - 1 комплект (для фальцевой кровли, крепление 1)"
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 3205,
                    "Цинк+краска": 3490
                }
            },
            "Высота 800 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 3585,
                        "Цинк+краска": 3880
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4285,
                        "Цинк+краска": 4655
                    }
                }
            ],
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4090,
                        "Цинк+краска": 4450
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4790,
                        "Цинк+краска": 5150
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5490,
                        "Цинк+краска": 5925
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение СТС «Универсальное».jpg"
    },
    {
        "id": "2_5",
        "name": "Кровельное ограждение СТС «Фальц»",
        "description": (
            "Кровельное ограждение СТС «Фальц» также доступно в шести вариантах с длиной 3 метра и различной высотой: 60 сантиметров - 2 поперечных трубы; 80 сантиметров - 2 трубы; 1,2 метра - две, три и четыре трубы. Предназначено для фальцевой кровли.\n\n"
            "Кровельное ограждение «Фальц» соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм (2, 3, 4) шт. Длина - 3 м.\n"
            "2. Кронштейн ограждения «СТС» оцинкованный, толщина металла 2 мм - 8 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 4 шт.\n"
            "4. Упор 600×30×30 оцинкованный, толщина металла 1,5 мм - 4 шт.\n"
            "5. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "6. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 5 шт.\n"
            " • Болт М8 + гайка М8 - 16 шт.\n"
            " • Саморез 5,5×25 - 21 шт.\n"
            " • Заглушка пластиковая Ф25 мм - 4 шт.\n"
            "7. Прижимные планки - 1 комплект - 8 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 3660,
                    "Цинк+краска": 3970
                }
            },
            "Высота 800 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4050,
                        "Цинк+краска": 4345
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4395,
                        "Цинк+краска": 5010
                    }
                }
            ],
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4750,
                        "Цинк+краска": 5115
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5335,
                        "Цинк+краска": 5780
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6040,
                        "Цинк+краска": 6480
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение СТС «Фальц».jpg"
    },
    {
        "id": "2_6",
        "name": "Кровельное ограждение комбинированное СТС «Универсальное» 4 опоры",
        "description": (
            "Кровельное ограждение комбинированное СТС «Универсальное» 4 опоры представлено в пяти моделях длиной 3 метра с различными высотами: 60 см - 2 поперечные трубы; 80 см - 2 трубы; 1,2 метра - 2 или 3 трубы и 1,2 метра с 4-мя трубами. Ограждение подходит для всех видов кровельных материалов.\n\n"
            "Кровельное ограждение комбинированное «Универсальное» соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм (2, 3, 4) шт.\n"
            "2. Кронштейн ограждения «СТС» оцинкованный, толщина металла 1,5 мм - 4 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 4 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж - 1 комплект:\n"
            " • Саморез для крепления лаг и реек 8×60 - 8 шт.\n"
            " • Резиновая прокладка 30×10 - 8 шт.\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 7 шт.\n"
            " • Саморез 5,5×25 - 12 шт.\n"
            " • Заглушка пластиковая Ф25 мм - 4шт.\n"
            " • Прижимные планки - 1 комплект (для фальцевой кровли, крепление 1)."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 4995,
                    "Цинк+краска": 5360
                }
            },
            "Высота 800 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 5500,
                    "Цинк+краска": 5870
                }
            },
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6170,
                        "Цинк+краска": 6675
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6865,
                        "Цинк+краска": 7375
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7570,
                        "Цинк+краска": 8090
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение комбинированное СТС «Универсальное» 4 опоры.jpg"
    },
    {
        "id": "2_7",
        "name": "Кровельное ограждение комбинированное СТС «Фальц» 4 опоры",
        "description": (
            "Кровельное ограждение комбинированное СТС «Фальц» 4 опоры, представленное в пяти моделях, имеет длину 3 метра и различные высоты: 60 см с двумя поперечными трубами, 80 см с двумя трубами, 120 см с двумя или тремя трубами и 120 см с четырьмя трубами. Оно подходит для всех типов кровельных материалов и обеспечивает безопасность при работе на крыше.\n\n"
            "Кровельное ограждение комбинированное «Фальц» соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм (2, 3, 4) шт. Длина - 3 м.\n"
            "2. Кронштейн ограждения «СТС» оцинкованный, толщина металла 2 мм - 8 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 4 шт.\n"
            "4. Упор 600×30×30 оцинкованный, толщина металла 1,5 мм - 4 шт.\n"
            "5. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "6. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 5 шт.\n"
            " • Болт М8 + гайка М8 - 16 шт.\n"
            " • Саморез 5,5×25 - 21 шт.\n"
            " • Заглушка пластиковая Ф25 мм - 4 шт.\n"
            "7. Прижимные планки - 1 комплект - 8 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 6335,
                    "Цинк+краска": 6715
                }
            },
            "Высота 800 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 6850,
                    "Цинк+краска": 7230
                }
            },
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7600,
                        "Цинк+краска": 8125
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 8300,
                        "Цинк+краска": 8810
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 9000,
                        "Цинк+краска": 9520
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение комбинированное СТС «Фальц» 4 опоры.jpg"
    },
    {
        "id": "2_8",
        "name": "Кровельное ограждение комбинированное СТС «Универсальное» 3 опоры",
        "description": (
            "Кровельное ограждение комбинированное СТС «Универсальное» 3 опоры. Доступно в пяти различных вариантах. Все модели длиной 3 метра, но имеют разную высоту: 60 см - 2 поперечных трубы, 80 см - 2 трубы, 1,2 м - 2 или 3 трубы, а также 1,2 м с 4 трубами. Эконом-класс.\n\n"
            "Кровельное ограждение соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм (2, 3, 4) шт.\n"
            "2. Кронштейн ограждения «СТС» оцинкованный, толщина металла 1,5 мм - 4 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 4 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж - 1 комплект:\n"
            " • Саморез для крепления лаг и реек 8×60 - 6 шт.\n"
            " • Резиновая прокладка 30×10 - 6 шт.\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 7 шт.\n"
            " • Саморез 5,5×25 - 9 шт.\n"
            " • Заглушка пластиковая Ф25 мм - 4шт.\n"
            " • Прижимные планки - 1 комплект (для фальцевой кровли, крепление 1)."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 4485,
                    "Цинк+краска": 4850
                }
            },
            "Высота 800 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 4870,
                    "Цинк+краска": 5235
                }
            },
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5460,
                        "Цинк+краска": 5820
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6150,
                        "Цинк+краска": 6595
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6850,
                        "Цинк+краска": 7365
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение комбинированное СТС «Универсальное» 3 опоры.jpg"
    },
    {
        "id": "2_9",
        "name": "Кровельное ограждение комбинированное СТС «Фальц» 3 опоры",
        "description": (
            "Кровельное ограждение комбинированное СТС «Фальц» 3 опоры также доступно в пяти вариантах с длиной 3 метра и различной высотой: 60 сантиметров - 2 поперечных трубы; 80 сантиметров - 2 трубы; 120 сантиметров - две или три трубы, а также 1.2 метра с 4 трубами. Подходит для фальцевой кровли. Эконом-вариант.\n\n"
            "Кровельное ограждение комбинированное «Фальц» соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм (2, 3, 4) шт. Длина - 3 м.\n"
            "2. Кронштейн ограждения «СТС» оцинкованный, толщина металла 2 мм - 6 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 3 шт.\n"
            "4. Упор 600×30×30 оцинкованный, толщина металла 1,5 мм - 3 шт.\n"
            "5. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "6. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 4 шт.\n"
            " • Болт М8 + гайка М8 - 12 шт.\n"
            " • Саморез 5,5×25 - 17 шт.\n"
            " • Заглушка пластиковая Ф25 мм - 4 шт.\n"
            "7. Прижимные планки - 1 комплект - 6 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 5510,
                    "Цинк+краска": 5885
                }
            },
            "Высота 800 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 5890,
                    "Цинк+краска": 6250
                }
            },
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6480,
                        "Цинк+краска": 6920
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7180,
                        "Цинк+краска": 7690
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7880,
                        "Цинк+краска": 8395
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение комбинированное СТС «Фальц» 3 опоры.jpg"
    },
    {
        "id": "2_10",
        "name": "Кровельное ограждение парапетное СТС «В»",
        "description": (
            "Кровельное ограждение парапетное СТС «В» представлено в 5 моделях длиной 3 000 мм и различной высотой: 600 мм - 2 поперечные трубы, 800 мм - 2 или 3 поперечные трубы и 1 200 мм - 2 или 3 поперечные трубы. Подходит для всех видов кровель и обеспечивает безопасность во время работы на крыше. Вертикальный кронштейн крепления к парапету.\n\n"
            "Кровельное ограждение парапетное соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм - 2 шт. или 3 шт.\n"
            "2. Кронштейн ограждения «ПРОФ» В оцинкованный, толщина метала 2 мм с герметичной бутил-каучуковой лентой у основания - 3 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 3 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2, 3 шт.\n"
            " • Болт М10×20 + гайка М10 - 7 шт.\n"
            " • Саморез 5,5×25 - 9 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 3120,
                    "Цинк+краска": 3425
                }
            },
            "Высота 800 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 3505,
                        "Цинк+краска": 3790
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4570,
                        "Цинк+краска": 4945
                    }
                }
            ],
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4205,
                        "Цинк+краска": 4570
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5270,
                        "Цинк+краска": 5635
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение парапетное СТС «В».jpg"
    },
    {
        "id": "2_11",
        "name": "Кровельное ограждение парапетное СТС «Г»",
        "description": (
            "Кровельное ограждение парапетное СТС «Г» представлено в 6 моделях длиной 3 000 мм и различной высотой: 600 мм - 2 поперечные трубы, 800 мм - две или 3 поперечные трубы, и 1 200 мм - от 2 до 4 поперечных труб. Подходит для всех видов кровель и обеспечивает безопасность во время работы на крыше. Горизонтальный кронштейн крепления к парапету.\n\n"
            "Кровельное ограждение соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм - 2 шт. или 3 шт.\n"
            "2. Кронштейн ограждения «ПРОФ» Г оцинкованный, толщина метала 2 мм с герметичной бутил-каучуковой лентой у основания - 3 шт.\n"
            "3. Стойка ограждения 45×30 оцинкованная, толщина металла 2 мм (600, 800, 1200) - 3 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 7 шт.\n"
            " • Саморез 5,5×25 - 9 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 3120,
                    "Цинк+краска": 3425
                }
            },
            "Высота 800 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 3505,
                        "Цинк+краска": 3790
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4205,
                        "Цинк+краска": 4570
                    }
                }
            ],
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4570,
                        "Цинк+краска": 4945
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5270,
                        "Цинк+краска": 5635
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5975,
                        "Цинк+краска": 6490
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение парапетное СТС «Г».jpg"
    },
    {
        "id": "2_12",
        "name": "Кровельное ограждение СТС «ПРОФ» для плоских кровель 3 опоры",
        "description": (
            "Кровельное ограждение СТС «ПРОФ» для плоских кровель 3 опоры также доступно в шести вариантах с длиной 3 метра и различной высотой: 0,6 метра - 2 поперечных трубы; 0,8 метра - 2 или 3 трубы; 1,2 метра - от 2 до 4 поперечных трубы. Ограждение подходит для всех видов покрытий плоских кровель.\n\n"
            "Кровельное ограждение для плоских кровель соответствует требованиям ГОСТ.\n\n"
            "Комплектация:\n"
            "1. Труба оцинкованная Ф25 мм - 2 шт. или 3 шт.\n"
            "2. Кронштейн ограждения «ПРОФ» Г оцинкованный, толщина метала 2 мм с герметичной бутил-каучуковой лентой у основания - 3 шт.\n"
            "3. Стойка ограждения 45×30, толщина металла 2 мм. (600, 800, 1200) - 3 шт.\n"
            "4. Укос 30×30 оцинкованный, толщина металла 1,5 мм - 1 шт.\n"
            "5. Крепеж сборочный - 1 комплект:\n"
            " • Стыковочные планки - 2 шт.\n"
            " • Болт М10×20 + гайка М10 - 7 шт.\n"
            " • Саморез 5,5×25 - 9 шт."
        ),
        "specs": {
            "Высота 600 мм": {
                "Количество поперечных труб": 2,
                "Защитное покрытие": ["Цинк", "Цинк+краска"],
                "Цвет": {
                    "Цинк": "Нет вариантов",
                    "Цинк+краска": "RAL Classic"
                },
                "price": {
                    "Цинк": 3120,
                    "Цинк+краска": 3425
                }
            },
            "Высота 800 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 3505,
                        "Цинк+краска": 3790
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4205,
                        "Цинк+краска": 4570
                    }
                }
            ],
            "Высота 1200 мм": [
                {
                    "Количество поперечных труб": 2,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4570,
                        "Цинк+краска": 4945
                    }
                },
                {
                    "Количество поперечных труб": 3,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5270,
                        "Цинк+краска": 5635
                    }
                },
                {
                    "Количество поперечных труб": 4,
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5975,
                        "Цинк+краска": 6490
                    }
                }
            ]
        },
        "photo": "Кровельное ограждение СТС «ПРОФ» для плоских кровель 3 опоры.jpg"
    }
    ],
    "3": [
        {
            "id": "3_1",
        "name": "Площадка выхода на кровлю ЛП/СТС/800",
        "description": (
            "Площадка выхода на кровлю здания ЛП/СТС/800 размером 800x1000x1200 мм, изготовленная из оцинкованного металла.\n\n"
            "Обеспечивает безопасный и комфортный доступ к крыше для проведения необходимых работ и обслуживания.\n\n"
            "Площадка выхода на кровлю соответствует требованиям ГОСТ.\n\n"
            "Типы кровельных покрытий для которых подходить площадка для пожарной лестницы:\n"
            "• Битумные наплавляемые\n"
            "• ПВХ-мембраны\n"
            "• Сэндвич-панели\n"
            "• Профнастил\n"
            "• Металлочерепица\n"
            "• Фальц"
        ),
        "specs": ["Стандартная"],
        "coating": ["Цинк", "Цинк+краска"],
        "price": {"Цинк": 20595, "Цинк+краска": 21625},
        "photo": "Площадка выхода на кровлю ЛП/СТС/800.jpg"
    },
    {
        "id": "3_2",
        "name": "Лестница пожарная ЛП/СТС/800 (без площадки)",
        "description": (
            "Лестница пожарная ЛП/СТС/800 без площадки размером 800×1000 мм с четырьмя кронштейнами для крепления к стене или другой вертикальной поверхности. Соответствует всем требованиям пожарной безопасности. Обеспечивает быстрый и безопасный доступ на верхние этажи здания в случае возникновения пожара.\n\n"
            "Лестница пожарная соответствует требованиям ГОСТ.\n\n"
            "Типы кровельных покрытий для которых подходить наши пожарные лестницы:\n"
            "• Битумные наплавляемые\n"
            "• ПВХ-мембраны\n"
            "• Сэндвич-панели\n"
            "• Профнастил\n"
            "• Металлочерепица\n"
            "• Фальц"
        ),
        "specs": ["Стандартная"],
        "coating": ["Цинк", "Цинк+краска"],
        "price": {"Цинк": 9475, "Цинк+краска": 10505},
        "photo": "Лестница пожарная ЛП/СТС/800 (без площадки).jpg"
        }
    ],
    "4": [
        {
            "id": "4_1",
            "name": "Лестница стеновая СТС",
            "description": (
                "Лестница стеновая СТС доступна в двух вариантах длиной 2 000 мм и 3 000 мм. Оба изделия обеспечивают безопасный и удобный доступ на крышу, идеально подходит для всех видов кровель. Ширина лестницы -- 400 мм.\n\n"
                "Лестница соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Лестничное полотно 400×2000 (1800)\n"
                "2. Кронштейн крепления к кровле сборный Zn с бутил-каучуковой лентой -- 6 шт.\n"
                "3. Крепеж для сборки -- 1 комплект.\n"
                " • Саморез для для крепления лаг и реек 8×60 -- 12 шт.\n"
                " • Саморез 5,5×25 -- 32 шт."
            ),
            "specs": {
                "Длина 2000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4615,
                        "Цинк+краска": 4915
                    }
                },
                "Длина 3000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6695,
                        "Цинк+краска": 7070
                    }
                }
            },
            "photo": "Лестница стеновая СТС.jpg"
        },
        {
            "id": "4_2",
            "name": "Лестница кровельная СТС «Универсальный»",
            "description": (
                "Лестница кровельная СТС «Универсальный» доступна в двух вариантах с одинаковой шириной -- 400 мм. Первый вариант имеет длину 2 000 мм, а второй -- 3 000 мм. Оба изделия обеспечивают безопасный и удобный доступ на крышу, идеально подходят для использования на всех видах кровли.\n\n"
                "Лестница соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Лестничное полотно 400×3000 (1800)\n"
                "2. Кронштейн крепления к кровле сборный Zn с бутил-каучуковой лентой -- 6 шт.\n"
                "3. Крепеж для сборки -- 1 комплект.\n"
                " • Саморез для для крепления лаг и реек 8×60 -- 12 шт.\n"
                " • Саморез 5,5×25 -- 32 шт."
            ),
            "specs": {
                "Длина 2000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4615,
                        "Цинк+краска": 4915
                    }
                },
                "Длина 3000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 6695,
                        "Цинк+краска": 7070
                    }
                }
            },
            "photo": "Лестница кровельная СТС «Универсальный».jpg"
        },
        {
            "id": "4_3",
            "name": "Лестница кровельная СТС «ПРОФ»",
            "description": (
                "Лестница кровельная СТС «ПРОФ» разработана специально для кровель из профнастила выше НС40 и сендвич-панели любого производителя. Доступна в четырех различных вариантах, но все модели имеют одинаковую ширину -- 400 миллиметров. Высота каждой модели индивидуальна: 2 метра -- 6 кронштейнов; 3 метра -- 8 кронштейнов. Кронштейн обеспечивает надежное крепление лестницы к поверхности крыши.\n\n"
                "Лестница кровельная соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Лестничное полотно 400×3000 (1800)\n"
                "2. Кронштейн крепления к кровле сборный Zn с бутил-каучуковой лентой -- 6 шт.\n"
                "3. Крепеж для сборки -- 1 комплект.\n"
                " • Саморез для для крепления лаг и реек 8×60 -- 12 шт.\n"
                " • Саморез 5,5×25 -- 32 шт."
            ),
            "specs": {
                "Длина 2000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5160,
                        "Цинк+краска": 5455
                    }
                },
                "Длина 3000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7275,
                        "Цинк+краска": 7640
                    }
                }
            },
            "photo": "Лестница кровельная СТС «ПРОФ».jpg"
        },
        {
            "id": "4_4",
            "name": "Лестница кровельная СТС «Фальц»",
            "description": (
                "Лестница кровельная СТС «Фальц» представлена в двух вариантах. Ширина обоих моделей составляет 400 мм. Длина первой модели -- 2 000 мм, количество кронштейнов -- 6. Длина второй модели -- 3 000 мм, количество кронштейнов -- 8. Подходят для всех видов кровельных материалов. Обеспечивают безопасный и комфортный доступ на крышу.\n\n"
                "Лестница соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Лестничное полотно 400×3000 (1800)\n"
                "2. Кронштейн крепления к кровле сборный Zn с бутил-каучуковой лентой -- 6 шт.\n"
                "3. Крепеж для сборки -- 1 комплект.\n"
                " • Саморез для для крепления лаг и реек 8×60 -- 12 шт.\n"
                " • Саморез 5,5×25 -- 32 шт.\n"
                "4. Для фальцевой кровли прижимные планки -- 1 комплект."
            ),
            "specs": {
                "Длина 2000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 5245,
                        "Цинк+краска": 5545
                    }
                },
                "Длина 3000 мм": {
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7530,
                        "Цинк+краска": 7895
                    }
                }
            },
            "photo": "Лестница кровельная СТС «Фальц».jpg"
        }
    ],
    "5": [
        {
            "id": "5_1",
            "name": "Мостик кровельный СТС «ПРОФ»",
            "description": (
                "Мостик кровельный СТС «ПРОФ» предназначен для кровель из профнастила выше НС40 и сендвич-панел. Предлагается в трех различных длинах: 2500 мм, 1250 мм и 600 мм. Все модели имеют одинаковую ширину -- 300 миллиметров. Количество опорных кронштейнов зависит от длины мостика: 4 кронштейна для 2,5-метровой модели, 3 кронштейна для 1,25-метровой и 2 кронштейна для 600-милиметровой. Опорные кронштейны обеспечивают надежное крепление мостика к кровле.\n\n"
                "Кровельные мостик соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Полотно 300 мм × (2500, 1250, 600 мм.) -- 1 шт.\n"
                "2. Кронштейн «СТС» оцинкованный толщина метала 2 мм -- 4 шт. (3шт., 2 шт.)\n"
                "3. Кронштейн «СТС» регулировочный оцинкованный толщина метала 2 мм -- 4 шт. (3шт., 2 шт.)\n"
                "4. Крепеж -- 1 комплект:\n"
                " • Саморез для крепления лаг и реек 6×80 -- 8 шт. (6 шт., 4 шт.)\n"
                " • Резиновая прокладка 3×10 мм -- 8 шт. (6 шт., 4 шт.)\n"
                " • Болт М10×20 + гайка М10 -- 24 шт. (18 шт., 12 шт.)"
            ),
            "specs": {
                "Длина 600 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 2800,
                        "Цинк+краска": 3030
                    }
                },
                "Длина 1250 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4740,
                        "Цинк+краска": 4970
                    }
                },
                "Длина 2500 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7826,
                        "Цинк+краска": 8155
                    }
                }
            },
            "photo": "Мостик кровельный СТС «ПРОФ».jpg"
        },
        {
            "id": "5_2",
            "name": "Мостик кровельный СТС «Универсальный»",
            "description": (
                "Мостик кровельный СТС «Универсальный» подходит для всех видов кровельных материалов. Предлагается в трех различных длинах: 2500 мм, 1250 мм и 600 мм. Все модели имеют одинаковую ширину -- 300 миллиметров. Количество опорных кронштейнов зависит от длины мостика: 4 кронштейна для 2,5-метровой модели, 3 кронштейна для 1,25-метровой и 2 кронштейна для 60-сантиметровой. Опорные кронштейны обеспечивают надежное крепление мостика к кровле.\n\n"
                "Кровельные мостик соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Полотно 300 мм × (2500, 1250, 600 мм.) -- 1 шт.\n"
                "2. Кронштейн «СТС» оцинкованный толщина метала 2 мм -- 4 шт. (3шт., 2 шт.)\n"
                "3. Кронштейн «СТС» регулировочный оцинкованный толщина метала 2 мм -- 4 шт. (3шт., 2 шт.)\n"
                "4. Крепеж -- 1 комплект:\n"
                " • Саморез для крепления лаг и реек 6×80 -- 8 шт. (6 шт., 4 шт.)\n"
                " • Резиновая прокладка 3×10 мм -- 8 шт. (6 шт., 4 шт.)\n"
                " • Болт М10×20 + гайка М10 -- 24 шт. (18 шт., 12 шт.)"
            ),
            "specs": {
                "Длина 600 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 2575,
                        "Цинк+краска": 2850
                    }
                },
                "Длина 1250 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4355,
                        "Цинк+краска": 4685
                    }
                },
                "Длина 2500 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7108,
                        "Цинк+краска": 7630
                    }
                }
            },
            "photo": "Мостик кровельный СТС «Универсальный».jpg"
        },
        {
            "id": "5_3",
            "name": "Мостик кровельный СТС «Фальц»",
            "description": (
                "Мостик кровельный СТС «Фальц» конструкция разработана специально для фальцевых видов кровли. Доступны в трёх различных вариантах. Рабочая ширина для всех моделей составляет 300 мм. Однако, длина может варьироваться: 2500 мм с 4 опорными кронштейнами, 1250 мм с 3 опорными кронштейнами и 600 мм с двумя опорными кронштейнами. Эти мостики идеально подходят для фальцевых типов кровли.\n\n"
                "Кровельные мостик соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Полотно 300 мм × (2500, 1250, 600 мм.) -- 1 шт.\n"
                "2. Кронштейн «СТС» оцинкованный толщина метала 2 мм -- 4 шт. (3шт., 2 шт.)\n"
                "3. Кронштейн «СТС» регулировочный оцинкованный толщина метала 2 мм -- 4 шт. (3шт., 2 шт.)\n"
                "4. Крепеж -- 1 комплект:\n"
                " • Саморез для крепления лаг и реек 6×80 -- 8 шт. (6 шт., 4 шт.)\n"
                " • Резиновая прокладка 3×10 мм -- 8 шт. (6 шт., 4 шт.)\n"
                " • Болт М10×20 + гайка М10 -- 24 шт. (18 шт., 12 шт.)\n"
                "5. Прижимные планки -- 1 комплект. (для фальцевой кровли, крепление 2)"
            ),
            "specs": {
                "Длина 600 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 2955,
                        "Цинк+краска": 3245
                    }
                },
                "Длина 1250 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 4945,
                        "Цинк+краска": 5305
                    }
                },
                "Длина 2500 мм": {
                    "Количество поперечных труб": "Нет вариантов",
                    "Защитное покрытие": ["Цинк", "Цинк+краска"],
                    "Цвет": {
                        "Цинк": "Нет вариантов",
                        "Цинк+краска": "RAL Classic"
                    },
                    "price": {
                        "Цинк": 7985,
                        "Цинк+краска": 8405
                    }
                }
            },
            "photo": "Мостик кровельный СТС «Фальц».jpg"
        },
        {
            "id": "5_4",
            "name": "Ограждение к кровельному мостику СТС",
            "description": (
                "Ограждение к кровельному мостику СТС представлено в 11 вариантах длиной 600, 1250 и 2500 мм и различной высотой: 600 и 800 мм — 2  поперечные трубы, 1 200 мм — от 2 до 3 поперечных труб. Подходит для всех видов кровельных мостиком нашей компании и обеспечивает безопасность во время работы на крыше.\n\n"
                "Ограждение соответствует требованиям ГОСТ.\n\n"
                "Комплектация:\n"
                "1. Стойка ограждения 1200 (800, 600) – 4 (3, 2) шт.\n"
                "2. Труба Ф25 мм Zn 2500 (1250, 600) – 2 шт."
            ),
            "specs": {
                "Длина 600 мм": {
                    "Высота 600 мм": {
                        "Количество поперечных труб": 2,
                        "Защитное покрытие": ["Цинк", "Цинк+краска"],
                        "Цвет": {
                            "Цинк": "Нет вариантов",
                            "Цинк+краска": "RAL Classic"
                        },
                        "price": {
                            "Цинк": 1535,
                            "Цинк+краска": 1755
                        }
                    },
                    "Высота 800 мм": {
                        "Количество поперечных труб": 2,
                        "Защитное покрытие": ["Цинк", "Цинк+краска"],
                        "Цвет": {
                            "Цинк": "Нет вариантов",
                            "Цинк+краска": "RAL Classic"
                        },
                        "price": {
                            "Цинк": 1860,
                            "Цинк+краска": 2060
                        }
                    },
                    "Высота 1200 мм": {
                        "Количество поперечных труб": 2,
                        "Защитное покрытие": ["Цинк", "Цинк+краска"],
                        "Цвет": {
                            "Цинк": "Нет вариантов",
                            "Цинк+краска": "RAL Classic"
                        },
                        "price": {
                            "Цинк": 2190,
                            "Цинк+краска": 2410
                        }
                    }
                },
                "Длина 1250 мм": {
                    "Высота 600 мм": {
                        "Количество поперечных труб": 2,
                        "Защитное покрытие": ["Цинк", "Цинк+краска"],
                        "Цвет": {
                            "Цинк": "Нет вариантов",
                            "Цинк+краска": "RAL Classic"
                        },
                        "price": {
                            "Цинк": 2435,
                            "Цинк+краска": 2720
                        }
                    },
                    "Высота 800 мм": {
                        "Количество поперечных труб": 2,
                        "Защитное покрытие": ["Цинк", "Цинк+краска"],
                        "Цвет": {
                            "Цинк": "Нет вариантов",
                            "Цинк+краска": "RAL Classic"
                        },
                        "price": {
                            "Цинк": 2825,
                            "Цинк+краска": 3105
                        }
                    },
                    "Высота 1200 мм": [
                        {
                            "Количество поперечных труб": 2,
                            "Защитное покрытие": ["Цинк", "Цинк+краска"],
                            "Цвет": {
                                "Цинк": "Нет вариантов",
                                "Цинк+краска": "RAL Classic"
                            },
                            "price": {
                                "Цинк": 3307,
                                "Цинк+краска": 3605
                            }
                        },
                        {
                            "Количество поперечных труб": 3,
                            "Защитное покрытие": ["Цинк", "Цинк+краска"],
                            "Цвет": {
                                "Цинк": "Нет вариантов",
                                "Цинк+краска": "RAL Classic"
                            },
                            "price": {
                                "Цинк": 3660,
                                "Цинк+краска": 3970
                            }
                        }
                    ]
                },
                "Длина 2500 мм": {
                    "Высота 600 мм": {
                        "Количество поперечных труб": 2,
                        "Защитное покрытие": ["Цинк", "Цинк+краска"],
                        "Цвет": {
                            "Цинк": "Нет вариантов",
                            "Цинк+краска": "RAL Classic"
                        },
                        "price": {
                            "Цинк": 3605,
                            "Цинк+краска": 3865
                        }
                    },
                    "Высота 800 мм": {
                        "Количество поперечных труб": 2,
                        "Защитное покрытие": ["Цинк", "Цинк+краска"],
                        "Цвет": {
                            "Цинк": "Нет вариантов",
                            "Цинк+краска": "RAL Classic"
                        },
                        "price": {
                            "Цинк": 4150,
                            "Цинк+краска": 4450
                        }
                    },
                    "Высота 1200 мм": [
                        {
                            "Количество поперечных труб": 2,
                            "Защитное покрытие": ["Цинк", "Цинк+краска"],
                            "Цвет": {
                                "Цинк": "Нет вариантов",
                                "Цинк+краска": "RAL Classic"
                            },
                            "price": {
                                "Цинк": 4910,
                                "Цинк+краска": 5200
                            }
                        },
                        {
                            "Количество поперечных труб": 3,
                            "Защитное покрытие": ["Цинк", "Цинк+краска"],
                            "Цвет": {
                                "Цинк": "Нет вариантов",
                                "Цинк+краска": "RAL Classic"
                            },
                            "price": {
                                "Цинк": 5550,
                                "Цинк+краска": 5900
                            }
                        }
                    ]
                }
            },
            "photo": "Ограждение к кровельному мостику СТС.jpg"
        }
    ]
}

# Глобальные переменные для хранения состояния
user_states = {}  # Текущие состояния пользователей
user_selections = {}  # Выборы пользователей

# ========== ФОРМАТИРОВАНИЕ СООБЩЕНИЙ ==========
def format_product_message(product, selected_options=None):
    message = f"📦 <b>{product['name']}</b>\n\n"
    message += f"📝 <i>{product['description']}</i>\n\n"
    
    if selected_options:
        for option, value in selected_options.items():
            if option == "Цвет, RAL Classic" and value == "Не выбрано":
                continue
            message += f"🔹 {option}: {value}\n"
    
    if 'price' in product:
        if isinstance(product['price'], dict):
            if selected_options and 'Защитное покрытие' in selected_options:
                coating = selected_options['Защитное покрытие']
                price = product['price'].get(coating, 0)
                message += f"\n💰 Цена: {price} руб./шт\n"
            else:
                message += "\n💰 Цены:\n"
                for coating, price in product['price'].items():
                    message += f" • {coating}: {price} руб./шт\n"
        else:
            message += f"💰 Цена: {product['price']} руб./шт\n"
    return message

# ========== ОСНОВНЫЕ КОМАНДЫ ==========
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = str(update.effective_user.id)
    user_states[user_id] = "MAIN_MENU"  # Установка состояния
    user_selections[user_id] = {}  #
    
    keyboard = [
        [InlineKeyboardButton("🏢 О компании", callback_data="about")],
        [InlineKeyboardButton("📚 Каталог", callback_data="catalog")],
        [InlineKeyboardButton("📞 Контакты", callback_data="contacts")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    welcome_text = (
        "👋 Вас приветствует официальный бот продаж продукции ООО «СТС»!\n\n"
        "Мы предлагаем элементы безопасности на ВСЕ типы кровель, цены завода "
        "изготовителя, отгрузка от 1 дня. Воспользуйтесь нашим онлайн-решением для удобного "
        "формирования заявок на покупку продукции!"
    )
    
    if update.message:
        await update.message.reply_text(welcome_text, reply_markup=reply_markup)
    else:
        query = update.callback_query
        await query.answer()
        await query.edit_message_text(welcome_text, reply_markup=reply_markup)

async def about_company(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    about_text = (
        "🏢 <b>О компании</b>\n\n"
        "Компания ООО «СТС» работает в области производства элементов "
        "безопасности кровли с 2014 года.\n\n"
        "Мы применяем высокоточные станки, а на нашем производстве "
        "задействованы специалисты с опытом от 5 лет.\n\n"
        "Мы осуществляем бесплатную доставку до терминала транспортной компании "
        "в вашем городе.\n\n"
        "🌐 Официальный сайт: <a href='http://эбк-стс.рф'>эбк-стс.рф</a>"
    )
    
    keyboard = [[InlineKeyboardButton("🔙 Назад", callback_data="back_to_main")]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await query.edit_message_text(about_text, reply_markup=reply_markup, parse_mode="HTML")

async def contacts(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    user_id = str(query.from_user.id)
    user_states[user_id] = "AWAITING_QUESTION"  # Добавляем эту строку
    
    contacts_text = (
        "📞 <b>Контакты</b>\n\n"
        "Наш e-mail: ctcnet@yandex.ru\n\n"
        "Задайте вопрос, и мы свяжемся с вами в ближайшее время!"
    )
    
    keyboard = [
        [InlineKeyboardButton("📩 Задать вопрос", callback_data="ask_question")],
        [InlineKeyboardButton("🔙 Назад", callback_data="back_to_main")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await query.edit_message_text(contacts_text, reply_markup=reply_markup, parse_mode="HTML")

# ========== КАТАЛОГ И КОРЗИНА ==========
async def show_catalog(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()

    logger.info(f"Showing catalog for user {query.from_user.id}")
    logger.info(f"Categories data: {categories}")  # Проверка данных категорий
    
    user_id = str(query.from_user.id)
    user_states[user_id] = "CATALOG"
    
    # Формируем кнопки категорий
    keyboard = []
    for cat in categories:
        keyboard.append([InlineKeyboardButton(cat["name"], callback_data=f"cat_{cat['id']}")])
    
    # Добавляем кнопку "Назад"
    keyboard.append([InlineKeyboardButton("🔙 Назад", callback_data="back_to_main")])
    
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await query.edit_message_text(
        "📚 <b>Каталог продукции</b>\n\nВыберите категорию:",
        reply_markup=reply_markup,
        parse_mode="HTML"
    )
async def show_category_products(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    category_id = query.data.split("_")[1]
    user_id = str(query.from_user.id)
    user_states[user_id] = f"CATEGORY_{category_id}"
    
    if category_id not in products:
        await query.edit_message_text("Товары в этой категории временно отсутствуют.")
        return
    
    keyboard = [
        [InlineKeyboardButton(product["name"], callback_data=f"prod_{product['id']}")]
        for product in products[category_id]
    ]
    keyboard.append([InlineKeyboardButton("🔙 Назад", callback_data="catalog")])
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await query.edit_message_text(f"🏷 <b>{categories[int(category_id)-1]['name']}</b>\n\nВыберите модель:",
                                reply_markup=reply_markup,
                                parse_mode="HTML")

async def show_product(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    try:
        # Получаем ID продукта (формат "prod_1_1" -> "1_1")
        product_id = query.data.split('_')[1] + "_" + query.data.split('_')[2]
        user_id = str(query.from_user.id)
        
        # Логирование для отладки
        logger.info(f"Ищем товар с ID: {product_id}")
        logger.info(f"Доступные категории: {list(products.keys())}")

        # Поиск товара
        product = None
        for cat_id, category_items in products.items():
            for item in category_items:
                if item['id'] == product_id:
                    product = item
                    logger.info(f"Найден товар: {product['name']}")
                    break
            if product:
                break

        if not product:
            available_ids = [item['id'] for cat in products.values() for item in cat]
            logger.error(f"Товар не найден. Доступные ID: {available_ids}")
            await query.edit_message_text("⚠️ Товар временно недоступен")
            return

        # Формируем сообщение
        price_message = ""
        if isinstance(product.get('price'), dict):
            prices = [p for p in product['price'].values() if isinstance(p, (int, float))]
            price_message = f"\n💰 Цены: от {min(prices)} до {max(prices)} руб./шт\n"
        elif isinstance(product.get('price'), (int, float)):
            price_message = f"\n💰 Цена: {product['price']} руб./шт\n"

        # Создаем кнопки
        buttons = [
            [InlineKeyboardButton("📝 Описание", callback_data=f"desc_{product_id}")],
            [InlineKeyboardButton("📏 Высота", callback_data=f"height_{product_id}")],
            [InlineKeyboardButton("🔢 Кол-во труб", callback_data=f"tubes_{product_id}")],
            [InlineKeyboardButton("🎨 Покрытие", callback_data=f"coating_{product_id}")],
            [InlineKeyboardButton("🔙 Назад", callback_data=f"cat_{product_id.split('_')[0]}")]
        ]

        await query.edit_message_text(
            f"📦 <b>{product['name']}</b>{price_message}\nВыберите параметр:",
            reply_markup=InlineKeyboardMarkup(buttons),
            parse_mode="HTML"
        )

    except Exception as e:
        logger.error(f"Критическая ошибка: {str(e)}")
        await query.edit_message_text("🚫 Ошибка загрузки данных. Попробуйте позже.")

async def show_description(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    try:
        # Получаем полный ID вида "2_2" из "desc_2_2"
        product_id = '_'.join(query.data.split('_')[1:3])
        
        # Логирование для отладки
        logger.info(f"Ищем описание для товара ID: {product_id}")
        
        # Ищем товар во всех категориях
        product = None
        for category in products.values():
            for item in category:
                if item['id'] == product_id:
                    product = item
                    break
            if product:
                break

        if not product:
            logger.error(f"Товар {product_id} не найден при запросе описания")
            await query.edit_message_text("Товар не найден")
            return
            
        if 'description' not in product:
            logger.error(f"Нет описания у товара {product_id}")
            await query.edit_message_text("Описание отсутствует")
            return

        # Форматируем описание
        description = product['description']
        if isinstance(description, tuple):  # Если описание в виде кортежа
            description = ''.join(description)
            
        # Кнопка возврата
        keyboard = [[InlineKeyboardButton("🔙 Назад", callback_data=f"prod_{product_id}")]]
        
        await query.edit_message_text(
            f"📋 <b>{product['name']}</b>\n\n{description}",
            reply_markup=InlineKeyboardMarkup(keyboard),
            parse_mode="HTML"
        )

    except Exception as e:
        logger.error(f"Ошибка в show_description: {str(e)}")
        await query.edit_message_text("Ошибка загрузки описания")

async def select_specification(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    product_id = query.data.split("_")[1]
    user_id = str(query.from_user.id)
    
    # Получаем спецификации для продукта
    specs = product_specs.get(product_id, {}).get("specs", [])
    
    if not specs:
        await query.answer("Для этого товара нет вариантов спецификации")
        return
    
    keyboard = [
        [InlineKeyboardButton(spec, callback_data=f"select_spec_{product_id}_{i}")]
        for i, spec in enumerate(specs)
    ]
    keyboard.append([InlineKeyboardButton("🔙 Назад", callback_data=f"prod_{product_id}")])
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await query.edit_message_text(
        "📌 Выберите спецификацию:",
        reply_markup=reply_markup
    )

async def select_height(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    try:
        product_id = '_'.join(query.data.split('_')[1:3])  # Получаем "2_6"
        
        # Логирование для отладки
        logger.info(f"Запрошены высоты для товара: {product_id}")
        
        # Получаем спецификации товара
        product_spec = product_specs.get(product_id, {})
        if not product_spec:
            logger.error(f"Нет спецификаций для товара {product_id}")
            await query.answer("Для этого товара нет вариантов высоты")
            return
            
        # Получаем доступные высоты из specs
        heights = []
        if 'specs' in product_spec:
            heights = [h for h in product_spec['specs'].keys() if 'Высота' in h]
        
        if not heights:
            # Альтернативный вариант, если высоты хранятся в product_spec
            heights = product_spec.get('height', [])
        
        if not heights:
            logger.error(f"Нет вариантов высоты для {product_id}")
            await query.answer("Нет доступных вариантов высоты")
            return

        # Создаем кнопки для выбора высоты
        keyboard = []
        for height in heights:
            keyboard.append([InlineKeyboardButton(height, callback_data=f"select_height_{product_id}_{height}")])
        
        keyboard.append([InlineKeyboardButton("🔙 Назад", callback_data=f"prod_{product_id}")])
        
        await query.edit_message_text(
            "📏 Выберите высоту:",
            reply_markup=InlineKeyboardMarkup(keyboard)
            
    except Exception as e:
        logger.error(f"Ошибка в select_height: {str(e)}")
        await query.answer("Ошибка загрузки вариантов высоты")

async def handle_height_selection(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    try:
        # Формат callback_data: "select_height_2_6_Высота 600 мм"
        *_, product_id, height = query.data.split('_')
        product_id = '_'.join(product_id.split('_')[:2])  # На случай, если в height есть подчеркивания
        
        user_id = str(query.from_user.id)
        if user_id not in user_selections:
            user_selections[user_id] = {}
            
        # Сохраняем выбранную высоту
        user_selections[user_id]["selected_options"] = {
            "Высота": height
        }
        
        # Возвращаемся к товару
        await show_product(update, context)
        
    except Exception as e:
        logger.error(f"Ошибка выбора высоты: {str(e)}")
        await query.answer("Ошибка выбора высоты")

async def handle_spec_selection(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    _, product_id, spec_index = query.data.split("_")[1:]
    spec_index = int(spec_index)
    user_id = str(query.from_user.id)
    
    # Получаем спецификации для продукта
    specs = product_specs.get(product_id, {}).get("specs", [])
    
    if not specs or spec_index >= len(specs):
        await query.edit_message_text("Ошибка выбора спецификации")
        return
    
    # Сохраняем выбранную спецификацию
    user_selections[user_id]["selected_options"]["Спецификация"] = specs[spec_index]
    
    # Возвращаемся к продукту
    await show_product(update, context)

async def handle_height_selection(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    _, product_id, height_index = query.data.split("_")[1:]
    height_index = int(height_index)
    user_id = str(query.from_user.id)
    
    # Получаем высоты для продукта
    heights = product_specs.get(product_id, {}).get("height", [])
    
    if not heights or height_index >= len(heights):
        await query.edit_message_text("Ошибка выбора высоты")
        return
    
    # Сохраняем выбранную высоту
    user_selections[user_id]["selected_options"]["Высота"] = heights[height_index]
    
    # Возвращаемся к продукту
    await show_product(update, context)

async def select_tubes(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    product_id = query.data.split("_")[1]
    specs = product_specs.get(product_id, {}).get("specs", [])
    
    # Ищем варианты количества труб
    tube_options = []
    for spec in specs:
        if "Количество поперечных труб" in spec:
            tube_options.append(spec.split(":")[1].strip())
    
    if not tube_options:
        keyboard = [[InlineKeyboardButton("🔙 Назад", callback_data=f"prod_{product_id}")]]
        await query.edit_message_text(
            "Нет вариантов количества труб",
            reply_markup=InlineKeyboardMarkup(keyboard)
        )
        return
    
    keyboard = [
        [InlineKeyboardButton(option, callback_data=f"select_tubes_{product_id}_{i}")]
        for i, option in enumerate(tube_options)
    ]
    keyboard.append([InlineKeyboardButton("🔙 Назад", callback_data=f"prod_{product_id}")])
    
    await query.edit_message_text(
        "🔢 Выберите количество поперечных труб:",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

async def handle_tubes_selection(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    _, product_id, tube_index = query.data.split("_")[1:]
    tube_index = int(tube_index)
    user_id = str(query.from_user.id)
    
    specs = product_specs.get(product_id, {}).get("specs", [])
    tube_options = []
    for spec in specs:
        if "Количество поперечных труб" in spec:
            tube_options.append(spec.split(":")[1].strip())
    
    if not tube_options or tube_index >= len(tube_options):
        await query.edit_message_text("Ошибка выбора количества труб")
        return
    
    user_selections[user_id]["selected_options"]["Количество поперечных труб"] = tube_options[tube_index]
    await show_product(update, context)

async def confirm_order(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    user_id = str(query.from_user.id)
    user_states[user_id] = "AWAITING_ORDER_DETAILS"
    
    await query.edit_message_text(
        "🛒 Для оформления заказа введите:\n"
        "1. Ваше ФИО\n"
        "2. Номер телефона\n"
        "3. Название организации (или 'Физ. лицо')\n\n"
        "Пример:\n"
        "Иванов Иван Иванович\n"
        "+79101234567\n"
        "ООО СтройГрад"
    )

async def handle_order_details(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = str(update.effective_user.id)
    if user_states.get(user_id) != "AWAITING_ORDER_DETAILS":
        return
    
    order_details = update.message.text.split('\n')
    if len(order_details) < 3:
        await update.message.reply_text("Пожалуйста, введите все данные в указанном формате")
        return
    
    # Сохраняем данные заказа
    user_selections[user_id]["order_details"] = {
        "fio": order_details[0].strip(),
        "phone": order_details[1].strip(),
        "org": order_details[2].strip(),
        "username": update.effective_user.full_name,
        "user_id": user_id
    }
    
    # Формируем подтверждение заказа
    product = user_selections[user_id]["product"]
    options = user_selections[user_id]["selected_options"]
    
    order_message = (
        f"✅ <b>Ваш заказ:</b>\n\n"
        f"📦 <b>{product['name']}</b>\n"
    )
    
    for option, value in options.items():
        order_message += f"🔹 {option}: {value}\n"
    
    order_message += (
        f"\n👤 <b>Ваши данные:</b>\n"
        f"ФИО: {order_details[0].strip()}\n"
        f"Телефон: {order_details[1].strip()}\n"
        f"Организация: {order_details[2].strip()}\n\n"
        f"Подтвердите заказ:"
    )
    
    keyboard = [
        [InlineKeyboardButton("✅ Подтвердить заказ", callback_data="finalize_order")],
        [InlineKeyboardButton("❌ Отменить", callback_data="cancel_order")]
    ]
    
    await update.message.reply_text(
        order_message,
        reply_markup=InlineKeyboardMarkup(keyboard),
        parse_mode="HTML"
    )

async def finalize_order(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    user_id = str(query.from_user.id)
    if user_id not in user_selections:
        await query.edit_message_text("Ошибка оформления заказа")
        return

    # Формируем сообщение для менеджера
    product = user_selections[user_id]["product"]
    options = user_selections[user_id]["selected_options"]
    details = user_selections[user_id]["order_details"]
    
    manager_message = (
        f"🛒 <b>Новый заказ</b>\n\n"
        f"👤 <b>Клиент:</b>\n"
        f"ФИО: {details['fio']}\n"
        f"Телефон: {details['phone']}\n"
        f"Организация: {details['org']}\n"
        f"Telegram: @{query.from_user.username} (id: {user_id})\n\n"
        f"📦 <b>Товар:</b>\n"
        f"{product['name']}\n"
    )
    
    for option, value in options.items():
        manager_message += f"🔹 {option}: {value}\n"

    # Отправляем менеджерам
    for admin_id in ADMIN_CHAT_IDS:
        try:
            await context.bot.send_message(
                chat_id=admin_id,
                text=manager_message,
                parse_mode="HTML"
            )
        except Exception as e:
            logger.error(f"Ошибка при отправке заказа администратору {admin_id}: {e}")

    # Отправляем подтверждение клиенту
    confirmation_message = (
        "✅ <b>Благодарим за заказ!</b>\n\n"
        "• После оформления, в течение 60 минут, Вам перезвонит менеджер\n"
        "• Режим работы: Пн-Пт 9:00-17:00\n"
        "• После подтверждения выставим счет\n"
        "• Отгрузка от 1 рабочего дня\n"
        "• Доступен самовывоз или доставка ТК\n\n"
        "Для новых заказов нажмите /start"
    )
    
    await query.edit_message_text(
        confirmation_message,
        parse_mode="HTML"
    )

    # Очищаем данные
    del user_selections[user_id]
    user_states[user_id] = "MAIN_MENU"

async def handle_coating_selection(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    _, product_id, coating_index = query.data.split("_")[1:]
    coating_index = int(coating_index)
    user_id = str(query.from_user.id)
    
    # Получаем продукт
    product = None
    for category in products.values():
        for item in category:
            if item['id'] == product_id:
                product = item
                break
        if product:
            break
    
    if not product or 'coating' not in product or coating_index >= len(product['coating']):
        await query.edit_message_text("Ошибка выбора покрытия")
        return
    
    # Сохраняем выбранное покрытие
    selected_coating = product['coating'][coating_index]
    user_selections[user_id]["selected_options"]["Защитное покрытие"] = selected_coating
    
    # Если выбрано "Цинк+краска", предлагаем выбрать цвет
    if selected_coating == "Цинк+краска":
        keyboard = [
            [InlineKeyboardButton("Ввести цвет RAL", callback_data=f"enter_ral_{product_id}")],
            [InlineKeyboardButton("🔙 Назад", callback_data=f"select_coating_{product_id}_0")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await query.edit_message_text(
            "🎨 Вы выбрали Цинк+краска. Пожалуйста, укажите цвет по каталогу RAL Classic (четырехзначное число):",
            reply_markup=reply_markup
        )
    else:
        # Переходим к выбору количества
        await select_quantity(update, context, product_id)

async def enter_ral_color(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    product_id = query.data.split("_")[2]
    user_id = str(query.from_user.id)
    user_states[user_id] = f"AWAITING_RAL_{product_id}"
    
    await query.edit_message_text(
        "✏️ Введите четырехзначный код цвета RAL (например, 3005):"
    )

async def select_quantity(update: Update, context: ContextTypes.DEFAULT_TYPE, product_id=None):
    if not product_id:
        query = update.callback_query
        await query.answer()
        product_id = query.data.split("_")[2]
    
    user_id = str(update.effective_user.id)
    user_states[user_id] = f"AWAITING_QUANTITY_{product_id}"
    
    # Если это вызов из handle_coating_selection, используем query
    if hasattr(update, 'callback_query'):
        query = update.callback_query
        await query.edit_message_text(
            "🔢 Введите количество товара (в штуках):"
        )
    else:
        # Если это вызов после ввода RAL цвета
        await update.message.reply_text(
            "🔢 Введите количество товара (в штуках):"
        )

async def handle_quantity_input(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = str(update.effective_user.id)
    current_state = user_states.get(user_id, "")
    
    if not current_state.startswith("AWAITING_QUANTITY_"):
        return
    
    product_id = current_state.split("_")[2]
    
    try:
        quantity = int(update.message.text)
        if quantity <= 0:
            raise ValueError
    except ValueError:
        await update.message.reply_text("Пожалуйста, введите корректное количество (целое число больше 0):")
        return
    
    # Сохраняем количество
    user_selections[user_id]["selected_options"]["Количество"] = quantity
    
    # Рассчитываем итоговую цену
    product = user_selections[user_id]["product"]
    selected_options = user_selections[user_id]["selected_options"]
    
    if 'Защитное покрытие' in selected_options:
        coating = selected_options['Защитное покрытие']
        price_per_item = product['price'].get(coating, 0)
        total_price = price_per_item * quantity
        selected_options["Итоговая цена"] = total_price
    
    # Показываем итоговую информацию
    keyboard = [
    [InlineKeyboardButton("🛒 ЗАКАЗАТЬ", callback_data="confirm_order")],
    [InlineKeyboardButton("🔙 Назад", callback_data=f"prod_{product_id}")]
]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await update.message.reply_text(
        f"✅ Вы выбрали:\n\n{format_product_message(product, user_selections[user_id]['selected_options'])}\n\n"
        f"🔄 Итоговая сумма: {selected_options.get('Итоговая цена', 0)} руб.",
        reply_markup=reply_markup,
        parse_mode="HTML"
    )

async def confirm_add_to_cart(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    
    product_id = query.data.split("_")[2]
    user_id = str(query.from_user.id)
    
    if user_id not in user_selections or user_selections[user_id]["product_id"] != product_id:
        await query.edit_message_text("Ошибка добавления в корзину. Пожалуйста, начните выбор заново.")
        return
    
    # Добавляем товар в корзину
    cart_item = {
        "product": user_selections[user_id]["product"],
        "selected_options": user_selections[user_id]["selected_options"].copy()
    }
    
    if user_id not in user_carts:
        user_carts[user_id] = []
    
    user_carts[user_id].append(cart_item)
    
    # Показываем сообщение об успешном добавлении
    keyboard = [
        [InlineKeyboardButton("📦 Перейти в корзину", callback_data="view_cart")],
        [InlineKeyboardButton("🛒 Продолжить покупки", callback_data="catalog")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await query.edit_message_text(
        "✅ Товар успешно добавлен в корзину!",
        reply_markup=reply_markup
    )

# ========== ОБРАБОТЧИКИ СООБЩЕНИЙ ==========
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = str(update.effective_user.id)
    current_state = user_states.get(user_id, "MAIN_MENU")
    
    if current_state.startswith("AWAITING_RAL_"):
        product_id = current_state.split("_")[2]
        ral_color = update.message.text.strip()
        
        # Простая валидация RAL цвета (4 цифры)
        if not (ral_color.isdigit() and len(ral_color) == 4):
            await update.message.reply_text("Пожалуйста, введите корректный код RAL (четыре цифры):")
            return
        
        user_selections[user_id]["selected_options"]["Цвет, RAL Classic"] = f"RAL {ral_color}"
        await select_quantity(update, context, product_id)
    
    elif current_state.startswith("AWAITING_QUANTITY_"):
        await handle_quantity_input(update, context)
    
    elif current_state == "AWAITING_QUESTION":
        question = update.message.text
        await send_question_to_admin(update, context, question)
        user_states[user_id] = "MAIN_MENU"
        
        keyboard = [[InlineKeyboardButton("🔙 В главное меню", callback_data="back_to_main")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            "📩 Ваш вопрос отправлен! Мы свяжемся с вами в ближайшее время.",
            reply_markup=reply_markup
        )

async def send_question_to_admin(update: Update, context: ContextTypes.DEFAULT_TYPE, question):
    user = update.effective_user
    message = (
        f"❓ <b>Новый вопрос от пользователя</b>\n\n"
        f"👤 Пользователь: {user.full_name}\n"
        f"📱 Телефон: {user.id}\n\n"
        f"📝 Вопрос:\n{question}"
    )
    
    for admin_id in ADMIN_CHAT_IDS:
        try:
            await context.bot.send_message(
                chat_id=admin_id,
                text=message,
                parse_mode="HTML"
            )
        except Exception as e:
            logger.error(f"Ошибка при отправке вопроса администратору {admin_id}: {e}")

# ========== ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ ==========
async def back_to_main(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    await start(update, context)

async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    logger.error(f"Ошибка: {context.error}")
    if update.callback_query:
        await update.callback_query.answer("Произошла ошибка, попробуйте еще раз")

# ========== ЗАПУСК БОТА ==========
def main():
    app = ApplicationBuilder().token(TOKEN).build()

    # Основные обработчики команд
    app.add_handler(CommandHandler("start", start))
    
    # Обработчики callback-запросов (должны быть ДО текстовых обработчиков)
    app.add_handler(CallbackQueryHandler(about_company, pattern="^about$"))
    app.add_handler(CallbackQueryHandler(contacts, pattern="^contacts$"))
    app.add_handler(CallbackQueryHandler(show_catalog, pattern="^catalog$"))
    app.add_handler(CallbackQueryHandler(back_to_main, pattern="^back_to_main$"))
    
    # Обработчики для работы с товарами (важно сохранить этот порядок)
    app.add_handler(CallbackQueryHandler(show_category_products, pattern="^cat_"))
    app.add_handler(CallbackQueryHandler(show_product, pattern="^prod_"))
    app.add_handler(CallbackQueryHandler(show_description, pattern="^desc_"))
    app.add_handler(CallbackQueryHandler(select_specification, pattern="^spec_"))
    app.add_handler(CallbackQueryHandler(select_height, pattern="^height_"))
app.add_handler(CallbackQueryHandler(handle_height_selection, pattern="^select_height_"))
    app.add_handler(CallbackQueryHandler(select_tubes, pattern="^tubes_"))
    app.add_handler(CallbackQueryHandler(handle_coating_selection, pattern="^coating_"))
    
    # Обработчики текстовых сообщений (должны быть ПОСЛЕ callback-обработчиков)
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_order_details))
    
    # Обработка ошибок
    app.add_error_handler(error_handler)
    
    # Запуск бота через webhook
    app.run_webhook(
        listen="0.0.0.0",
        port=PORT,
        url_path=TOKEN,
        webhook_url=f"https://metalfencingbot.onrender.com/{TOKEN}"
    )

if __name__ == '__main__':
    main()
